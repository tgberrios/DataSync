================================================================================
üìã TAREAS PENDIENTES - DataSync Project
================================================================================

üî¥ TAREAS URGENTES DEL USUARIO:
================================
1. A√±adir columna 'notes' VARCHAR a catalog (DDL)
   - Quitar la columna de candidate_columns
   - Mostrar notes en el catalog (frontend)
================================================================================

üöÄ OPTIMIZACI√ìN DE PARALELISMO (NUEVO - Branch: feature/parallel-optimization):
================================================================================
üìä AN√ÅLISIS COMPLETO: Ver PARALLEL_OPTIMIZATION_ANALYSIS.md

OBJETIVO:
=========
Implementar Thread Pool + Connection Pool para mejorar 50-70% el tiempo
de sincronizaci√≥n de tablas.

PROBLEMA ACTUAL:
================
‚ö†Ô∏è  Crea y destruye threads para CADA tabla (overhead)
‚ö†Ô∏è  Workers quedan idle esperando al thread m√°s lento
‚ö†Ô∏è  Crea conexiones PostgreSQL por cada thread (overhead)
‚ö†Ô∏è  No hay reutilizaci√≥n de recursos

SOLUCI√ìN:
=========
‚úÖ Thread Pool con workers permanentes (4-8 workers fijos)
‚úÖ Connection Pool de PostgreSQL (reutilizable)
‚úÖ Task Queue thread-safe para tablas pendientes
‚úÖ 100% utilizaci√≥n de CPU (workers siempre trabajando)

BENEFICIOS ESPERADOS:
=====================
‚ö° 100 tablas peque√±as: 50s ‚Üí 15s (-70%)
‚ö° 1000 tablas mixtas: 15min ‚Üí 5min (-67%)
‚ö° Thread overhead: ~500ms ‚Üí 0ms (-100%)
‚ö° Connection overhead: ~20s ‚Üí 0s (-100%)
‚ö° Workers idle time: ~2min ‚Üí 0s (-100%)

PLAN DE IMPLEMENTACI√ìN (7-10 horas):
=====================================

üìã FASE 1 (2-3h): Core Components
----------------------------------
   [ ] 1.1 Crear ThreadSafeQueue<Task> template gen√©rico
           Archivo: include/sync/ThreadSafeQueue.h
           - push(Task) con lock
           - pop(Task&) blocking con condition_variable
           - finish() para se√±alar fin
           - size() thread-safe
   
   [ ] 1.2 Crear TableProcessorThreadPool
           Archivo: include/sync/TableProcessorThreadPool.h
           - Constructor crea N workers (threads fijos)
           - submitTask(TableTask) a√±ade a queue
           - waitForCompletion() espera a todos
           - M√©tricas: activeWorkers(), completedTasks()
   
   [ ] 1.3 Testing unitario
           Archivo: tests/sync/test_thread_pool.cpp
           - Test queue push/pop concurrente
           - Test pool con 4 workers
           - Test completion signal

üìã FASE 2 (1-2h): Connection Pooling
-------------------------------------
   [ ] 2.1 Crear PostgreSQLConnectionPool
           Archivo: include/sync/ConnectionPool.h
           - Constructor crea N conexiones pre-conectadas
           - acquire() bloquea hasta obtener conexi√≥n
           - release(conn) devuelve conexi√≥n al pool
           - RAII wrapper: ScopedConnection auto-release
   
   [ ] 2.2 Testing con m√∫ltiples conexiones
           Archivo: tests/sync/test_connection_pool.cpp
           - Test adquirir/liberar 100 veces
           - Test concurrencia (4 threads simult√°neos)

üìã FASE 3 (2-3h): Integration
------------------------------
   [ ] 3.1 Refactorizar transferDataMariaDBToPostgresParallel()
           Archivo: include/sync/MariaDBToPostgres.h
           Cambios:
           - Eliminar loop con tableProcessors.emplace_back()
           - Crear TableProcessorThreadPool(numWorkers)
           - Crear PostgreSQLConnectionPool(numWorkers)
           - Loop: pool.submitTask() para cada tabla
           - pool.waitForCompletion()
   
   [ ] 3.2 Refactorizar transferDataMSSQLToPostgresParallel()
           Archivo: include/sync/MSSQLToPostgres.h
           - Mismos cambios que MariaDB
   
   [ ] 3.3 Testing funcional completo
           - Probar con 10 tablas peque√±as
           - Probar con 3 tablas grandes
           - Verificar que todas se procesan correctamente

üìã FASE 4 (1h): Monitoring & Metrics
-------------------------------------
   [ ] 4.1 A√±adir logs de progreso cada 10s
           - "ThreadPool: Active 3/4 | Completed 45/100 | Pending 55"
           - "ConnectionPool: Available 2/4 | In-use 2/4"
   
   [ ] 4.2 Dashboard en StreamingData
           - Mostrar estado del pool en cada ciclo
           - Tiempo total de ciclo
           - Tablas/segundo promedio

üìã FASE 5 (1-2h): Testing & Validation
---------------------------------------
   [ ] 5.1 Testing de stress
           - 100 tablas peque√±as (benchmark)
           - 1000 tablas (si disponible)
           - Comparar tiempos ANTES vs DESPU√âS
   
   [ ] 5.2 Memory leak check
           - Verificar con valgrind o sanitizers
           - Ejecutar por 1 hora, verificar memoria estable
   
   [ ] 5.3 Graceful shutdown
           - Ctrl+C debe terminar workers limpiamente
           - No dejar threads zombies

CONFIGURACI√ìN RECOMENDADA:
==========================
En config.json:
{
  "sync": {
    "max_workers": 4,              ‚Üê Para CPU con 4-8 cores
    "connection_pool_size": 4,     ‚Üê Mismo que workers
    "max_tables_per_cycle": 1000
  }
}

Para servidores potentes (16+ cores):
{
  "sync": {
    "max_workers": 8,
    "connection_pool_size": 8,
    "max_tables_per_cycle": 10000
  }
}

ARCHIVOS A CREAR:
=================
include/sync/
‚îú‚îÄ‚îÄ ThreadSafeQueue.h          (nuevo - template gen√©rico)
‚îú‚îÄ‚îÄ TableProcessorThreadPool.h (nuevo - thread pool)
‚îú‚îÄ‚îÄ ConnectionPool.h           (nuevo - connection pool)

src/sync/
‚îú‚îÄ‚îÄ TableProcessorThreadPool.cpp (nuevo - implementaci√≥n)
‚îú‚îÄ‚îÄ ConnectionPool.cpp           (nuevo - implementaci√≥n)

tests/sync/
‚îú‚îÄ‚îÄ test_thread_pool.cpp       (nuevo - unit tests)
‚îú‚îÄ‚îÄ test_connection_pool.cpp   (nuevo - unit tests)

ARCHIVOS A MODIFICAR:
=====================
include/sync/MariaDBToPostgres.h
- M√©todo: transferDataMariaDBToPostgresParallel()
- Cambio: usar ThreadPool en lugar de loop manual

include/sync/MSSQLToPostgres.h
- M√©todo: transferDataMSSQLToPostgresParallel()
- Cambio: usar ThreadPool en lugar de loop manual

CMakeLists.txt
- A√±adir TableProcessorThreadPool.cpp
- A√±adir ConnectionPool.cpp

PROGRESO:
=========
[ ] Fase 1: Core Components (0/3)
[ ] Fase 2: Connection Pooling (0/2)
[ ] Fase 3: Integration (0/3)
[ ] Fase 4: Monitoring (0/2)
[ ] Fase 5: Testing (0/3)

TOTAL: 0/13 tareas completadas

ESTADO: ‚è∏Ô∏è  ESPERANDO APROBACI√ìN DEL USUARIO

================================================================================
