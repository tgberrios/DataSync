================================================================================
üìã TAREAS PENDIENTES - DataSync Project
================================================================================

üî¥ TAREAS URGENTES DEL USUARIO:
================================
1. A√±adir columna 'notes' VARCHAR a catalog (DDL)
   - Quitar la columna de candidate_columns
   - Mostrar notes en el catalog (frontend)

2. Aplicar nueva tabla de logs en casa

3. CDC incremental funcionando

4. Fix: Queries que se quedan infinito haciendo retry cuando fallan
   - Implementar max 3 retries en todas las conexiones
   - El componente que m√°s conexiones usa es CatalogManager

5. TODAS LAS CONSULTAS TIENEN QUE SER SEPARADAS, NO ANIDADAS

6. Banner: Ponerle abajito "RUNNING" o similar

================================================================================

üü° PRIORIDAD MEDIA - Governance:
================================
1. DUPLICACI√ìN: Validaci√≥n tabla exists (4 veces)
   - Archivo: DataQuality.cpp
   - C√≥digo: Query a information_schema.tables repetida
   - Soluci√≥n: Funci√≥n helper tableExists(txn, schema, table)
   - Beneficio: DRY, ~40 l√≠neas eliminadas

2. cleanSchemaNameForPostgres funci√≥n global
   - Archivo: DataQuality.cpp l√≠neas 4-35
   - Problema: Funci√≥n global (namespace pollution)
   - Soluci√≥n: Mover a utils/string_utils.h
   - Beneficio: Mejor organizaci√≥n

3. IF-CHAINS MONSTRUOSOS: determine*() functions - 388 L√çNEAS
   - determineDataCategory: 148 l√≠neas
   - determineBusinessDomain: 100 l√≠neas
   - determineSensitivityLevel: 80 l√≠neas
   - determineDataClassification: 60 l√≠neas
   - Problema: L√≥gica hardcoded, no configurable
   - Soluci√≥n: Externalizar a governance_rules.json + DataClassifier
   - Beneficio: 388 l√≠neas ‚Üí ~50 l√≠neas, configurable, extensible

================================================================================

üü° PRIORIDAD MEDIA - Engines:
=============================
1. Reutilizar ConnectionStringParser en extractDatabaseName()
   - Archivo: mssql_engine.cpp l√≠neas 143-163
   - Problema: Duplica l√≥gica de parsing
   - Soluci√≥n: Usar ConnectionStringParser::parse() existente
   - Beneficio: DRY

2. Validar timeout setting en MariaDB
   - Archivo: mariadb_engine.cpp l√≠nea 80
   - Problema: mysql_query() no valida return code
   - Soluci√≥n: Verificar resultado y loguear warnings
   - Beneficio: Mejor observabilidad

================================================================================

üî¥ PRIORIDAD CR√çTICA - Sync/MariaDB + MSSQL (Consolidaci√≥n Masiva):
====================================================================
ESTADO: üî¥ EXTREMADAMENTE RIESGOSO - 70-80% c√≥digo duplicado

DUPLICACI√ìN MASIVA: ~2500 l√≠neas duplicadas entre archivos
- MariaDBToPostgres.h: 3976 l√≠neas
- MSSQLToPostgres.h: 3433 l√≠neas
- TOTAL: 7409 l√≠neas
- DUPLICADO: ~2500 l√≠neas (70-80% overlap)

C√≥digo ID√âNTICO entre ambos:
- struct TableInfo: 100% id√©ntico
- Lambda sorting: 100% id√©ntico
- getActiveTables(): 95% id√©ntico
- buildUpsertQuery(): 90% id√©ntico
- cleanValueForPostgres(): 85% similar
- Parallel processing infrastructure: 80% id√©ntico
- L√≥gica TRUNCATE/RESET: 95% id√©ntica
- PK management: 95% id√©ntico

SOLUCI√ìN RECOMENDADA:
Crear clase base DatabaseToPostgresSync (~2000 l√≠neas comunes)
‚îú‚îÄ MariaDBToPostgres (hereda, ~800 l√≠neas espec√≠ficas MySQL)
‚îî‚îÄ MSSQLToPostgres (hereda, ~700 l√≠neas espec√≠ficas ODBC)

BENEFICIOS:
- Elimina ~2500 l√≠neas duplicadas
- Bugs se arreglan 1 vez, no 2
- Agregar nuevo motor (Oracle, MongoDB) es f√°cil
- Testing se hace 1 vez

REDUCCI√ìN POTENCIAL: 7409 ‚Üí ~3500 l√≠neas (-53%)

ESTIMACI√ìN: 2-3 semanas de trabajo

================================================================================

üü° PRIORIDAD MEDIA - Sync/StreamingData:
=========================================
1. Separar .h y .cpp (861 l√≠neas en header)
   - Problema: Todo en header ralentiza compilaci√≥n
   - Soluci√≥n: StreamingData.h (declaraciones) + StreamingData.cpp (impl)
   - Nota: Requiere separar MariaDB/MSSQL primero
   - Beneficio: Compilaci√≥n m√°s r√°pida

2. DUPLICACI√ìN: Validaci√≥n de tablas por engine (3 veces)
   - qualityThread: MariaDB, MSSQL, PostgreSQL
   - C√≥digo EXACTAMENTE IGUAL 3 veces (~105 l√≠neas)
   - Soluci√≥n: Extraer a validateTablesForEngine(conn, dbEngine)
   - Beneficio: 105 l√≠neas ‚Üí 15 l√≠neas

3. DUPLICACI√ìN: Configuraci√≥n de timeouts (2 veces)
   - Soluci√≥n: Extraer a setConnectionTimeouts(conn)
   - Beneficio: DRY

================================================================================

üü¢ PRIORIDAD BAJA:
==================
Catalog:
- Hacer cleanCatalog() transaccional (evaluar necesidad)
- Agregar progress reporting para operaciones largas

Engines:
- Considerar migrar MariaDB a MySQL Connector/C++ (prepared statements nativos)
- Agregar retry logic en createConnection() (3 retries con backoff)
- Agregar connection pooling
